{% extends 'base.html.twig' %}

{% block stylesheets %}
    <link rel="stylesheet" href="/css/style.css">
{% endblock %}

{% block javascripts %}
    const container = document.getElementById('carousel-container-maison');
    const content = document.getElementById('carousel-content-maison');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');

    let currentIndex = 0;
    const totalItems = document.querySelectorAll('.carousel-item-maison').length;
    const visibleItems = 3; // Nombre d'images visibles à la fois

    nextBtn.addEventListener('click', () => {
        if (currentIndex < totalItems - visibleItems) {
            currentIndex++;
            updateCarousel();
        }
    });

    prevBtn.addEventListener('click', () => {
        if (currentIndex > 0) {
            currentIndex--;
            updateCarousel();
        }
    });

    function updateCarousel() {
        const newPosition = -currentIndex * 100 / visibleItems + '%';
        content.style.transform = 'translateX(' + newPosition + ')';
    }

{% endblock %}

{% block title %}Accueil{% endblock %}

{% block body %}
    <div class="contenu">
        <div class="events">
        <h3>Évènements :</h3>
            <div id="carousel-container-maison">
                <div id="carousel-content-maison">
                    {% for evenement in evenements %}
                        <div class="carousel-item-maison">
                            <a href="{{ path('app_evenement_id', {id: evenement.id}) }}">
                            <img src="{{asset(evenement.idImage.pathImage)}}"  alt="{{ evenement.nomEvent }}">

                            <p>{{ evenement.nomEvent }}</p>
                            </a>
                        </div>
                    {% endfor %}
                </div>

                <div id="prev">&lt;</div>
                <div id="next">&gt;</div>
            </div>
        </div>
        <br>
        <h3>Animaux :</h3>
        <div class="animaux">
                {% for animal in animaux %}
                        <div class="animal">
                            <a href="{{ path('app_animal_id', {id: animal.id}) }}">
                            <img src="{{asset(animal.idImage.pathImage)}}" alt="{{ animal.nomAnimal }}">

                            <p>{{ animal.nomAnimal }}</p>
                            </a>
                        </div>
                {% endfor %}
        </div>
    </div>
    <script>
    const container = document.getElementById('carousel-container-maison');
    const content = document.getElementById('carousel-content-maison');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');

    let currentIndex = 0;
    const totalItems = document.querySelectorAll('.carousel-item-maison').length;
    const visibleItems = 3; // Nombre d'images visibles à la fois

    nextBtn.addEventListener('click', () => {
    if (currentIndex < totalItems - visibleItems) {
    currentIndex++;
    updateCarouselMaison();
    }
    });

    prevBtn.addEventListener('click', () => {
    if (currentIndex > 0) {
    currentIndex--;
    updateCarouselMaison();
    }
    });

    function updateCarouselMaison() {
    const newPosition = -currentIndex * 100 / visibleItems + '%';
    content.style.transform = 'translateX(' + newPosition + ')';
    }
    </script>
{% endblock %}